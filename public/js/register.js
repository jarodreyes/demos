// Generated by CoffeeScript 1.8.0
$(document).ready(function() {
  var addVerify;
  addVerify = (function(_this) {
    return function() {
      return $('.small.button').val('Success!');
    };
  })(this);
  $('#signup').submit(function(e) {
    e.preventDefault();
    $.ajax({
      type: "POST",
      url: '/points',
      data: $('#signup').serialize(),
      success: addVerify()
    });
    return false;
  });
  return $('.codeSubmit').click(function(e) {
    var data, pn;
    e.preventDefault();
    pn = $('input[name="phone_number"]').val();
    if (pn.length <= 10) {
      pn = "+1" + pn;
    }
    data = {
      'phone_number': pn,
      'code': $('input[name="code"]').val()
    };
    $.ajax({
      type: "POST",
      url: '/verify',
      data: data,
      success: (function(_this) {
        return function() {
          $('.status .alert-box').hide();
          $('.success').fadeIn(300);
          return setTimeout(function() {
            return document.location = '/success';
          }, 1000);
        };
      })(this),
      error: (function(_this) {
        return function() {
          $('.status .alert-box').hide();
          return $('.error').fadeIn(300);
        };
      })(this)
    });
    return false;
  });
});
